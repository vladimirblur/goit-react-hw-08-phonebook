{"version":3,"sources":["redux/contacts/contacts-reducer.js","redux/store.js","components/PrivateRoute/PrivateRoute.js","components/PublicRoute/PublicRoute.js","components/Navigation/Navigation.js","components/UserMenu/UserMenu.js","components/Header/Header.js","App.js","index.js","redux/contacts/contacts-operations.js","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","components/UserMenu/UserMenu.module.css","redux/contacts/contacts-actions.js"],"names":["items","createReducer","fetchContacts","fulfilled","_","payload","addContact","state","deleteContact","filter","id","filterChange","loading","pending","rejected","error","contactReducer","combineReducers","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","auth","persistReducer","authReducer","contacts","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","devTools","process","persistor","persistStore","PrivateRoute","children","redirectTo","useSelector","authSelectors","getIsLoggedIn","to","PublicRoute","restricted","Navigation","isLoggedIn","Box","sx","display","xs","md","flexGrow","alignItems","component","List","ListItem","className","isActive","width","theme","createTheme","palette","primary","main","contrastText","secondary","UserMenu","dispatch","useDispatch","name","getUserName","s","container","ThemeProvider","Button","type","onClick","authOperations","logOut","variant","mt","mb","Header","AppBar","position","Container","maxWidth","Toolbar","disableGutters","flexDirection","HomeView","lazy","ContactsView","SignUpView","LoginView","App","isFetchingCurrentUser","getIsFetchingCurrentUser","useEffect","fetchCurrentUser","fallback","path","element","ReactDOM","render","StrictMode","document","getElementById","axios","defaults","baseURL","createAsyncThunk","a","rejectWithValue","get","data","response","status","message","alert","contact","post","contactId","delete","token","headers","common","Authorization","signUp","credentials","logIn","thunkAPI","getState","persistedToken","operations","user","getError","authSlice","createSlice","initialState","email","extraReducers","action","module","exports","createAction"],"mappings":"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","file":"static/js/main.92d7ea6d.chunk.js","sourcesContent":["import { combineReducers } from \"redux\";\r\nimport { createReducer } from \"@reduxjs/toolkit\";\r\nimport { filterChange } from \"./contacts-actions\";\r\nimport {\r\n  fetchContacts,\r\n  addContact,\r\n  deleteContact,\r\n} from \"./contacts-operations\";\r\n\r\nconst items = createReducer([], {\r\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\r\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\r\n  [deleteContact.fulfilled]: (state, { payload }) =>\r\n    state.filter(({ id }) => id !== payload),\r\n});\r\n\r\nconst filter = createReducer(\"\", {\r\n  [filterChange]: (_, { payload }) => payload.filter,\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n  [addContact.pending]: () => true,\r\n  [addContact.fulfilled]: () => false,\r\n  [addContact.rejected]: () => false,\r\n  [deleteContact.pending]: () => true,\r\n  [deleteContact.fulfilled]: () => false,\r\n  [deleteContact.rejected]: () => false,\r\n  [fetchContacts.pending]: () => true,\r\n  [fetchContacts.fulfilled]: () => false,\r\n  [fetchContacts.rejected]: () => false,\r\n});\r\n\r\nconst error = createReducer(null, {\r\n  [fetchContacts.rejected]: (_, { payload }) => payload,\r\n  [fetchContacts.pending]: () => null,\r\n});\r\n\r\nconst contactReducer = combineReducers({\r\n  items,\r\n  filter,\r\n  loading,\r\n  error,\r\n});\r\n\r\nexport { contactReducer };\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport { contactReducer } from \"./contacts/contacts-reducer\";\r\nimport { authReducer } from \"./auth\";\r\n\r\nconst authPersistConfig = {\r\n  key: \"auth\",\r\n  storage,\r\n  whitelist: [\"token\"],\r\n};\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    contacts: contactReducer,\r\n  },\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }),\r\n  devTools: process.env.NODE_ENV === \"development\",\r\n});\r\n\r\nconst persistor = persistStore(store);\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { store, persistor };\r\n","import { useSelector } from \"react-redux\";\r\nimport { Navigate } from \"react-router\";\r\nimport { authSelectors } from \"redux/auth\";\r\n\r\nexport default function PrivateRoute({ children, redirectTo = \"/\" }) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n\r\n  return isLoggedIn ? children : <Navigate to={redirectTo} />;\r\n}\r\n","import { useSelector } from \"react-redux\";\r\nimport { Navigate } from \"react-router\";\r\nimport { authSelectors } from \"redux/auth\";\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = \"/\",\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n\r\n  return shouldRedirect ? <Navigate to={redirectTo} /> : children;\r\n}\r\n","import { NavLink } from \"react-router-dom\";\r\nimport { List, ListItem } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\n\r\nexport default function Navigation({ isLoggedIn }) {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: { xs: \"flex\", md: \"flex\" },\r\n        flexGrow: 1,\r\n        alignItems: \"center\",\r\n      }}\r\n      component=\"nav\"\r\n    >\r\n      <List sx={{ display: \"flex\", flexGrow: isLoggedIn ? 0 : 1 }}>\r\n        <ListItem>\r\n          <NavLink\r\n            to=\"/\"\r\n            className={({ isActive }) => (isActive ? \"activeLink\" : \"link\")}\r\n          >\r\n            Home\r\n          </NavLink>\r\n        </ListItem>\r\n        {isLoggedIn && (\r\n          <ListItem>\r\n            {\" \"}\r\n            <NavLink\r\n              to=\"/contacts\"\r\n              className={({ isActive }) => (isActive ? \"activeLink\" : \"link\")}\r\n            >\r\n              Contacts\r\n            </NavLink>\r\n          </ListItem>\r\n        )}\r\n      </List>\r\n\r\n      {!isLoggedIn && (\r\n        <List sx={{ display: \"flex\" }}>\r\n          <ListItem sx={{ width: \"auto\" }}>\r\n            <NavLink\r\n              to=\"/register\"\r\n              className={({ isActive }) => (isActive ? \"activeLink\" : \"link\")}\r\n            >\r\n              Sign up\r\n            </NavLink>\r\n          </ListItem>\r\n\r\n          <ListItem sx={{ width: \"auto\" }}>\r\n            <NavLink\r\n              to=\"/login\"\r\n              className={({ isActive }) => (isActive ? \"activeLink\" : \"link\")}\r\n            >\r\n              Log In\r\n            </NavLink>\r\n          </ListItem>\r\n        </List>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { authSelectors, authOperations } from \"redux/auth\";\r\nimport { Button } from \"@mui/material\";\r\nimport s from \"./UserMenu.module.css\";\r\n\r\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#01579b\",\r\n      contrastText: \"#f3e5f5\",\r\n    },\r\n    secondary: {\r\n      main: \"#f44336\",\r\n      contrastText: \"#f3e5f5\",\r\n    },\r\n  },\r\n});\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUserName);\r\n\r\n  return (\r\n    <div className={s.container}>\r\n      <ThemeProvider theme={theme}>\r\n        <span className={s.name}>{`Welcome ${name}`}</span>\r\n\r\n        <Button\r\n          type=\"button\"\r\n          onClick={() => dispatch(authOperations.logOut())}\r\n          variant=\"contained\"\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Log out\r\n        </Button>\r\n      </ThemeProvider>\r\n    </div>\r\n  );\r\n}\r\n","import { useSelector } from \"react-redux\";\r\nimport { authSelectors } from \"redux/auth\";\r\nimport { AppBar, Container, Toolbar } from \"@mui/material\";\r\nimport Navigation from \"components/Navigation\";\r\nimport UserMenu from \"components/UserMenu\";\r\n\r\nexport default function Header() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n\r\n  return (\r\n    <AppBar position=\"static\">\r\n      <Container maxWidth=\"xl\">\r\n        <Toolbar\r\n          disableGutters\r\n          sx={{\r\n            flexDirection: {\r\n              xs: isLoggedIn ? \"row\" : \"row-reverse\",\r\n              md: \"row\",\r\n            },\r\n          }}\r\n        >\r\n          <Navigation isLoggedIn={isLoggedIn} />\r\n\r\n          {isLoggedIn && <UserMenu />}\r\n        </Toolbar>\r\n      </Container>\r\n    </AppBar>\r\n  );\r\n}\r\n","import { Route, Routes } from \"react-router\";\nimport { Suspense, lazy, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { authOperations, authSelectors } from \"redux/auth\";\nimport { Box } from \"@mui/system\";\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport PrivateRoute from \"components/PrivateRoute/PrivateRoute\";\nimport PublicRoute from \"components/PublicRoute\";\nimport Header from \"components/Header\";\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: \"#263238\",\n    },\n    secondary: {\n      main: \"#01579b\",\n    },\n  },\n});\n\nconst HomeView = lazy(() =>\n  import(\"pages/HomeView\" /* webpackChunkName: \"home-page\"*/)\n);\n\nconst ContactsView = lazy(() =>\n  import(\"pages/ContactsView\" /* webpackChunkName: \"contacts-page\"*/)\n);\nconst SignUpView = lazy(() =>\n  import(\"pages/SignUpView\" /* webpackChunkName: \"sign-up-page\"*/)\n);\nconst LoginView = lazy(() =>\n  import(\"pages/LoginView\" /* webpackChunkName: \"login-page\"*/)\n);\n\nfunction App() {\n  const dispatch = useDispatch();\n  const isFetchingCurrentUser = useSelector(\n    authSelectors.getIsFetchingCurrentUser\n  );\n\n  useEffect(() => {\n    dispatch(authOperations.fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div className=\"App\">\n        <Header />\n\n        <Box component=\"main\">\n          {isFetchingCurrentUser ? (\n            <h1>Loading...</h1>\n          ) : (\n            <>\n              <Suspense fallback={<div>Loading</div>}>\n                <Routes>\n                  <Route\n                    path=\"/\"\n                    element={\n                      <PublicRoute>\n                        <HomeView />\n                      </PublicRoute>\n                    }\n                  />\n                  <Route\n                    path=\"/register\"\n                    element={\n                      <PublicRoute restricted>\n                        <SignUpView />\n                      </PublicRoute>\n                    }\n                  />\n                  <Route\n                    path=\"/login\"\n                    element={\n                      <PublicRoute redirectTo=\"/contacts\" restricted>\n                        <LoginView />\n                      </PublicRoute>\n                    }\n                  />\n                  <Route\n                    path=\"/contacts\"\n                    element={\n                      <PrivateRoute redirectTo=\"/login\">\n                        <ContactsView />\n                      </PrivateRoute>\n                    }\n                  />\n                </Routes>\n              </Suspense>\n            </>\n          )}\n        </Box>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport { Provider } from \"react-redux\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport store from \"./redux/store\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store.store}>\n        <PersistGate loading={null} persistor={store.persistor}>\n          <App />\n        </PersistGate>\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","import axios from \"axios\";\r\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\naxios.defaults.baseURL = \"https://connections-api.herokuapp.com\";\r\n\r\nexport const fetchContacts = createAsyncThunk(\r\n  \"contacts/fecthContacts\",\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.get(\"/contacts\");\r\n      return data;\r\n    } catch (error) {\r\n      const status = error.response ? error.response.status : 500;\r\n\r\n      if (status === 400) {\r\n        const message = \"Error fecthing contacts\";\r\n        alert(message);\r\n        return rejectWithValue(message);\r\n      } else {\r\n        return rejectWithValue(error.message);\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nexport const addContact = createAsyncThunk(\r\n  \"contacts/addContact\",\r\n  async (contact, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post(\"/contacts\", contact);\r\n      return data;\r\n    } catch (error) {\r\n      const status = error.response ? error.response.status : 500;\r\n\r\n      if (status === 400) {\r\n        const message = \"Error adding contacts\";\r\n        alert(message);\r\n        return rejectWithValue(message);\r\n      } else {\r\n        return rejectWithValue(error.message);\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nexport const deleteContact = createAsyncThunk(\r\n  \"contacts/deleteContact\",\r\n  async (contactId, { rejectWithValue }) => {\r\n    try {\r\n      axios.delete(`/contacts/${contactId}`);\r\n      return contactId;\r\n    } catch (error) {\r\n      rejectWithValue(error);\r\n    }\r\n  }\r\n);\r\n","import axios from \"axios\";\r\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\naxios.defaults.baseURL = \"https://connections-api.herokuapp.com\";\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = \"\";\r\n  },\r\n};\r\n\r\nconst signUp = createAsyncThunk(\r\n  \"auth/signUp\",\r\n  async (credentials, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post(\"/users/signup\", credentials);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      const status = error.response ? error.response.status : 500;\r\n\r\n      if (status === 400) {\r\n        const message = \"This email is already taken\";\r\n        alert(message);\r\n        return rejectWithValue(message);\r\n      } else {\r\n        return rejectWithValue(error.message);\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nconst logIn = createAsyncThunk(\r\n  \"auth/login\",\r\n  async (credentials, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post(\"/users/login\", credentials);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      const status = error.response ? error.response.status : 500;\r\n\r\n      if (status === 400) {\r\n        const message = \"Email or password is incorrect\";\r\n\r\n        alert(message);\r\n        return rejectWithValue(message);\r\n      } else {\r\n        return rejectWithValue(error.message);\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nconst logOut = createAsyncThunk(\r\n  \"auth/logout\",\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      await axios.post(\"/users/logout\");\r\n      token.unset();\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  }\r\n);\r\n\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  \"auth/refresh\",\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get(\"users/current\");\r\n      return data;\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  }\r\n);\r\n\r\nconst operations = {\r\n  signUp,\r\n  logOut,\r\n  logIn,\r\n  fetchCurrentUser,\r\n};\r\nexport default operations;\r\n","const getIsLoggedIn = (state) => state.auth.isLoggedIn;\r\nconst getIsFetchingCurrentUser = (state) => state.auth.isFetchingCurrentUser;\r\nconst getError = (state) => state.auth.error;\r\n\r\nconst getUserName = (state) => state.auth.user.name;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUserName,\r\n  getIsFetchingCurrentUser,\r\n  getError,\r\n};\r\n\r\nexport default authSelectors;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport authOperations from \"./auth-operations\";\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isFetchingCurrentUser: false,\r\n  error: null,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.signUp.fulfilled](state, { payload }) {\r\n      state.user = payload.user;\r\n      state.token = payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.signUp.rejected](state, { payload }) {\r\n      state.error = payload;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, { payload }) {\r\n      state.user = payload.user;\r\n      state.token = payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state, _) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.pending](state) {\r\n      state.isFetchingCurrentUser = true;\r\n    },\r\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isFetchingCurrentUser = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.rejected](state) {\r\n      state.isFetchingCurrentUser = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__2IFyb\",\"name\":\"UserMenu_name__1qacW\"};","import { createAction } from \"@reduxjs/toolkit\";\r\n\r\nexport const filterChange = createAction(\"contacts/changeFilter\", (filter) => ({\r\n  payload: { filter },\r\n}));\r\n"],"sourceRoot":""}